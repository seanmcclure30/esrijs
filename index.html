<!DOCTYPE html>
<html lang="en">
<head>
  <title>Hello, Map!</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="" />

  <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.25/"></script>

  <script>  
    require([
      "esri/config",
      "esri/Map",
      "esri/views/MapView",
      "esri/widgets/BasemapGallery",
      "esri/widgets/Locate",
      "esri/Basemap"
    ], function(esriConfig, Map, MapView, BasemapGallery, Locate, Basemap) {
      
      esriConfig.apiKey = "AAPTxy8BH1VEsoebNVZXo8HurIfW5ZPXHLc4FtZkxnMyWUSM7DLdf-PZEaFojHZCloSCDVjmznHOKOFGGtR6c_rc3eIZd1Mbs5C3ofJpAURK_97yjKeTbsxNitkxTiQPPYAh09EIai0Bj1oAsjFiUFhpK5G5U82Ea7mlH9KkoorRwpJkUndjEZhpARCDUo5RKtxYu6ueHouJ1boxPKTDk4C3jwcPYqJdWoE-HtHOoLseDfSwMffu6woYDdNVtWbrbTTlAT1_ooT7wXqT";

      const map = new Map({ 
        basemap: "hybrid" // Basemap layer service 
      });

      const view = new MapView({
        map: map,
        center: [-97.2771, 27.6835], // Longitude, latitude
        zoom: 12, // Zoom level
        container: "viewDiv" // Div element
      });

      // Wait for the view to load before adding widgets
      view.when(function() {

        // Locate Button Widget
        const locate = new Locate({
          view: view,   // Reference to the view
          useHeadingEnabled: false,  // Disable using device heading
          goToOverride: function(view, options) {
            options.target.scale = 1500;  // Customize the zoom scale
            return view.goTo(options.target);
          }
        });

        // Add Locate button to the top left of the view
        view.ui.add(locate, "top-left");

        // Create custom basemaps
        const OpenStreetMapBasemap = new Basemap({
          portalItem: {
            id: "b834a68d7a484c5fb473d4ba90d35e71" // OpenStreetMap
          },
          thumbnailUrl:
          "https://www.arcgis.com/sharing/rest/content/items/b834a68d7a484c5fb473d4ba90d35e71/info/thumbnail/thumbnail1578326212401.jpeg"
        });

        const DarkGrayCanvasBasemap = new Basemap({
          portalItem: {
            id: "358ec1e175ea41c3bf5c68f0da11ae2b" // Dark Gray Canvas
          },
          thumbnailUrl:
          "https://www.arcgis.com/sharing/rest/content/items/358ec1e175ea41c3bf5c68f0da11ae2b/info/thumbnail/thumbnail1561649841835.jpeg"
        });

        // Basemap Gallery Widget
        const basemapGallery = new BasemapGallery({
          view: view, // The view the basemap will change on
          source: [OpenStreetMapBasemap, DarkGrayCanvasBasemap] // Only show these basemaps
        });

        // Add BasemapGallery to the UI
        view.ui.add(basemapGallery, "top-right");
        
        // Optional: Verify the basemap gallery widget is added
        console.log("BasemapGallery widget added.");

      }).otherwise(function(error) {
        console.error("Error loading view:", error);
      });
    });  
  </script>

  <style>
    html, body, #viewDiv {  
      padding: 0;
      margin: 0;  
      height: 100%;  
      width: 100%;  
    }  
  </style>
    
</head>
<body>
  <div id="viewDiv"></div> 
</body>
</html>


